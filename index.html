<!DOCTYPE html>
<html>
  <head>
    <title>Test Storage</title>
	
	<!-- PHONEGAP CORDOVA -->
    <script type="text/javascript" charset="utf-8" src="cordova-2.7.0.js"></script>
	
	<!-- JAVASCRIPT -->
    <script type="text/javascript" charset="utf-8">
	
    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, true);

    // Populate the database 
    //
    function populateDB(tx) {
		alert("PopulateDB");
        tx.executeSql("DROP TABLE IF EXISTS DEMO");
        tx.executeSql("CREATE TABLE IF NOT EXISTS DEMO (id unique, data)");
        tx.executeSql("INSERT INTO DEMO (id, data) VALUES (1, "First row")");
        tx.executeSql("INSERT INTO DEMO (id, data) VALUES (2, "Second row")");
    }

    // Transaction error callback
    //
    function errorCB(err) {
		alert("errorCB");
        console.log("Error processing SQL: "+err.code);
    }

    // Transaction success callback
    //
    function successCB() {
	    alert("successCB");
        var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
        db.transaction(queryDB, errorCB);
    }

    // Cordova is ready
    //
    function onDeviceReady() {
		alert("onDeviceReady");
        //recup  infos
		var html = "";
		html = html + "<li>" + "Device Name: " + device.name + "</li>";
		html = html + "<li>" + "Device Cordova: " + device.cordova + "</li>";
		html = html + "<li>" + "Device Platform: " + device.platform + "</li>";
		html = html + "<li>" + "Device UUID: " + device.uuid + "</li>";
		//affichage
		console.log(html);
		$("#idDivInitDeviceCordova").html(html);
		//init base de données
		var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);
		
    }

    </script>
  </head>
  <body onload="javascript:onDeviceReady()">
    <h1>Example</h1>
    <p>Database</p>
	<br/>
	<div id="idDivInitDeviceCordova">
		&nbsp;
	</div>
	<br/>
	<div id="idDivResultatRequete">
		&nbsp;
	</div>
	<br/>
	<p>end</p>
  </body>
</html>
